{% extends 'base.html' %}

{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'auth/css/register.css' %}">
{% endblock %}

{% block js %}
<script src="{% static 'auth/js/script.js' %}" defer></script>
{% endblock %}

{% block title %}
<title>Criar Conta</title>
{% endblock %}

{% block content %}
<div class="container py-5 d-flex justify-content-center">
  <div class="card shadow-lg border-0 rounded-4" style="max-width: 420px; width: 100%;">
    <div class="card-body p-4">

      <!-- Cabeçalho com botão de tema -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <div class="bg-primary bg-gradient rounded-circle d-inline-flex justify-content-center align-items-center"
               style="width: 60px; height: 60px;">
            <i class="bi bi-person-plus-fill text-white fs-3"></i>
          </div>
          <h4 class="fw-bold mt-3 mb-1">Crie sua conta</h4>
          <p class="text-muted small mb-0">Junte-se à nossa comunidade</p>
        </div>

        <!-- Botão de alternar tema dentro do card -->
        <button id="theme-toggle"
                class="btn btn-outline-secondary btn-sm shadow-sm rounded-circle"
                title="Alternar tema">
          <i id="theme-icon" class="bi bi-moon-fill"></i>
        </button>
      </div>

      <!-- Formulário -->
      <form method="POST" novalidate>
        {% csrf_token %}
        {% for field in form %}
        <div class="mb-3">
          <label for="{{ field.id_for_label }}" class="form-label fw-semibold">{{ field.label }}</label>

          {% if "password" in field.name %}
          <div class="input-group">
            {{ field }}
            <button class="btn btn-outline-secondary" type="button"
                    onclick="togglePassword('{{ field.id_for_label }}', this)">
              <i class="bi bi-eye"></i>
            </button>
          </div>
          {% else %}
          {{ field }}
          {% endif %}

          {% if field.errors %}
          <div class="text-danger small mt-1">{{ field.errors }}</div>
          {% endif %}
        </div>
        {% endfor %}

        <div class="d-grid">
          <button type="submit" class="btn btn-primary fw-semibold">
            <i class="bi bi-person-check"></i> Criar Conta
          </button>
        </div>
      </form>

      <!-- Link para login -->
      <div class="text-center mt-4 text-muted">
        Já tem uma conta?
        <a href="{% url 'login' %}" class="text-decoration-none fw-semibold">Entrar</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}