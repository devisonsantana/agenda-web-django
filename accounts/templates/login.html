{% extends "base.html" %}

{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'auth/css/login.css' %}">
{% endblock %}

{% block js %}
<script src="{% static 'auth/js/script.js' %}" defer></script>
{% endblock %}

{% block title %}
<title>Login - Agenda Web</title>
{% endblock %}

{% block content %}
<main class="card shadow-lg p-4">
    <!-- Botão de Tema -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="m-0 fw-semibold">Agenda Web</h4>
        <button id="theme-toggle" class="btn btn-outline-secondary btn-sm" title="Alternar tema">
            <i id="theme-icon" class="bi bi-moon-fill"></i>
        </button>
    </div>

    <!-- Mensagens -->
    <div id="messages-container">
        {% if messages %}
        {% for message in messages %}
        {% if message.tags == "error" %}
        <div class="alert alert-danger py-2 d-flex align-items-center">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            {{ message }}
        </div>
        {% elif message.tags == "success" %}
        <div class="alert alert-success py-2 d-flex align-items-center">
            <i class="bi bi-check-circle-fill me-2"></i>
            {{ message }}
        </div>
        {% elif message.tags == "warning" %}
        <div class="alert alert-warning py-2 d-flex align-items-center">
            <i class="bi bi-exclamation-circle-fill me-2"></i>
            {{ message }}
        </div>
        {% elif message.tags == "info" %}
        <div class="alert alert-info py-2 d-flex align-items-center">
            <i class="bi bi-info-circle-fill me-2"></i>
            {{ message }}
        </div>
        {% else %}
        <div class="alert alert-secondary py-2 d-flex align-items-center">
            <i class="bi bi-bell-fill me-2"></i>
            {{ message }}
        </div>
        {% endif %}
        {% endfor %}
        {% endif %}
    </div>

    <!-- Area de Login -->
    <form id="login-form" method="post">
        {% csrf_token %}
        <!-- Usuario -->
        <div class="mb-3">
            <label for="username" class="form-label">Usuário</label>
            <input type="text" name="username" id="username" class="form-control" placeholder="Digite seu usuário"
                required autofocus>
        </div>
        <!-- Senha -->
        <div class="mb-3 position-relative">
            <label for="password" class="form-label">Senha</label>
            <div class="input-group">
                <input type="password" name="password" id="password" class="form-control" placeholder="Digite sua senha"
                    required autofocus>
                <!-- Alternador de visibilidade -->
                <button type="button" class="btn btn-outline-secondary" id="toggle-password"
                    onclick="togglePassword('password', this)">
                    <i class="bi bi-eye" id="toggle-icon"></i>
                </button>
            </div>
        </div>

        <div class="d-grid gap-2 mt-4">
            <button type="submit" class="btn btn-primary p-2">
                <i class="bi bi-box-arrow-in-right me-2"></i> Entrar
            </button>
            <p class="text-center mt-1">Não tem conta? <a href="{% url 'register' %}">Crie uma agora</a>
            </p>
        </div>
    </form>
</main>
{% endblock %}